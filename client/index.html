<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Impostor Arcane</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://unpkg.com/three@0.162.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.162.0/examples/js/controls/OrbitControls.js"></script>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div id="app-root">
    <header class="app-header">
      <div class="brand">
        <span class="brand-title">IMPOSTOR ARCANE</span>
        <span class="brand-subtitle">Party Game ¬∑ Local &amp; Online</span>
      </div>
      <div class="header-status">
        <span id="online-connection-label">Servidor: desconectado</span>
      </div>
    </header>

    <main id="screen-home" class="screen active">
      <section class="home-hero">
        <div class="home-text">
          <h1>¬øC√≥mo quer√©s jugar?</h1>
          <p>
            Un juego de impostores, palabras y traiciones. Jug√° todos
            alrededor de una sola pantalla en <strong>modo local</strong>
            o conectate con amigos usando el <strong>modo online 3D con voz</strong>.
          </p>
          <div class="home-buttons">
            <button id="btn-go-local" class="primary">Modo Local (2D)</button>
            <button id="btn-go-online" class="secondary">Modo Online (3D)</button>
          </div>
          <p class="home-tip">
            Tip: conect√° la notebook a la tele y us√° el modo local como si fuera un juego de mesa.
          </p>
        </div>
        <div class="home-card">
          <p class="home-label">Caracter√≠sticas</p>
          <ul>
            <li>Hasta 15 jugadores por sala</li>
            <li>1 a 4 impostores</li>
            <li>Ronda de palabras y votaci√≥n</li>
            <li>Vista 2D tipo mesa ¬∑ vista 3D inmersiva</li>
            <li>Chat de voz por WebRTC (modo online)</li>
          </ul>
        </div>
      </section>
    </main>

    <main id="screen-local" class="screen">
      <div class="screen-header">
        <button class="ghost" id="btn-back-home-from-local">‚Üê Volver</button>
        <h2>Impostor (Local)</h2>
        <span class="badge">Solo en esta pantalla</span>
      </div>

      <section class="local-layout">
        <aside class="local-panel">
          <p class="phase-label">
            <span>Ronda: <span id="local-round">0</span></span>
            <span>¬∑</span>
            <span>Fase: <span id="local-phase">configuraci√≥n</span></span>
          </p>

          <div class="group">
            <label>
              Cantidad de jugadores (2 a 15)
              <input type="number" id="local-player-count" min="2" max="15" value="3" />
            </label>

            <label>
              Nombres (separados por coma)
              <input type="text" id="local-names" placeholder="Juan, Pedro, Meli..." />
            </label>

            <label>
              Cantidad de impostores (1 a 4)
              <input type="number" id="local-impostor-count" min="1" max="4" value="1" />
            </label>

            <div class="button-row">
              <button id="local-btn-load" class="primary">Cargar jugadores</button>
              <button id="local-btn-deal" class="success" disabled>Repartir cartas</button>
            </div>
            <button id="local-btn-next-turn" class="disabled full" disabled>
              Siguiente turno
            </button>
          </div>

          <div class="group">
            <h3>Jugadores</h3>
            <ul id="local-player-list" class="player-list"></ul>
          </div>

          <div class="group">
            <h3>Ver carta de:</h3>
            <select id="local-see-card-select">
              <option value="">-- Elegir jugador --</option>
            </select>
            <p class="hint">
              Tip: que cada uno venga solo a ver su carta üòâ
            </p>
            <div id="local-card" class="role-card hidden">
              <span id="local-card-text"></span>
            </div>
          </div>

          <div class="group">
            <h3>Votaci√≥n</h3>
            <p class="hint">
              Despu√©s de la ronda de palabras, habilit√° la votaci√≥n.
            </p>
            <button id="local-btn-go-vote" class="secondary full" disabled>Ir a votaci√≥n</button>

            <select id="local-vote-select" disabled>
              <option value="">-- ¬øA qui√©n expulsan? --</option>
            </select>
            <button id="local-btn-kick" class="danger full" disabled>Expulsar seleccionado</button>

            <p id="local-status" class="status-log"></p>
          </div>
        </aside>

        <section class="local-canvas-wrap">
          <canvas id="local-mesa-canvas"></canvas>
        </section>
      </section>
    </main>

    <main id="screen-online" class="screen">
      <div class="screen-header">
        <button class="ghost" id="btn-back-home-from-online">‚Üê Volver</button>
        <h2>Impostor (Online 3D)</h2>
        <span class="badge accent">Multijugador ¬∑ voz</span>
      </div>

      <section class="online-layout">
        <aside class="online-panel">
          <h3>Lobby</h3>
          <label>
            Tu nombre
            <input type="text" id="online-name" placeholder="Ej: Melanie" />
          </label>
          <div class="button-row">
            <button id="online-btn-create" class="primary">Crear sala</button>
          </div>
          <div class="button-row">
            <input type="text" id="online-room-code" placeholder="C√≥digo sala" />
            <button id="online-btn-join" class="secondary">Unirse</button>
          </div>
          <div class="button-row">
            <button id="online-btn-start" class="success" disabled>Iniciar partida (host)</button>
          </div>
          <p class="hint">
            M√°x. 15 jugadores. El host inicia la partida cuando est√©n listos.
          </p>

          <h3>Jugadores en sala</h3>
          <ul id="online-player-list" class="player-list"></ul>

          <h3>Fase actual</h3>
          <p id="online-phase">Sin sala</p>
          <p id="online-turn"></p>

          <h3>Tu carta</h3>
          <div id="online-role-card" class="role-card hidden">
            <span id="online-role-text"></span>
          </div>

          <h3>Votaci√≥n</h3>
          <p id="online-vote-info" class="hint">A√∫n no se est√° votando.</p>
          <div id="online-vote-area"></div>
          <button id="online-btn-callvote" class="secondary full" disabled>
            Llamar a votaci√≥n (host)
          </button>

          <h3>Voz</h3>
          <p id="online-voice-status" class="hint">Micr√≥fono: no inicializado</p>
          <button id="online-btn-voice" class="primary full">Habilitar micr√≥fono</button>
        </aside>

        <section class="online-scene-wrap">
          <div id="online-three-container"></div>
          <div id="online-log" class="online-log"></div>
        </section>
      </section>
    </main>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
